From e75154f646a1a32c10092ab6c0bfc87fa9c631e5 Mon Sep 17 00:00:00 2001
From: Jotanh <joaopedromelen2910@gmail.com>
Date: Thu, 1 May 2025 21:02:07 +0000
Subject: [PATCH] Relax-requirement-for-visible-fla-to-sdcards

---
 .../core/java/com/android/server/StorageManagerService.java | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/services/core/java/com/android/server/StorageManagerService.java b/services/core/java/com/android/server/StorageManagerService.java
index a4d7c43da133..6f51a38647d6 100644
--- a/services/core/java/com/android/server/StorageManagerService.java
+++ b/services/core/java/com/android/server/StorageManagerService.java
@@ -1635,10 +1635,8 @@ class StorageManagerService extends IStorageManager.Stub
 
             // Adoptable public disks are visible to apps, since they meet
             // public API requirement of being in a stable location.
-            if ((vol.disk.isAdoptable()) || (vol.disk.isSd())) {
-                vol.mountFlags |= VolumeInfo.MOUNT_FLAG_VISIBLE_FOR_WRITE;
-            } else if (vol.disk.isSd()) {
-                vol.mountFlags |= VolumeInfo.MOUNT_FLAG_VISIBLE_FOR_WRITE;
+            // Assume all SDs match this as well
+            if (vol.disk.isAdoptable() || vol.disk.isSd()) {
             }
 
             vol.mountUserId = mCurrentUserId;
-- 
2.43.0

